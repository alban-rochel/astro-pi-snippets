import glob
import json
import csv
import numpy as np
import matplotlib
import matplotlib.patches
import matplotlib.pyplot as plt

fileList = glob.glob('*info.json')

plot_data_lat = []
plot_data_lon = []
plot_data_shape = []
plot_data_color = []
    
for file in fileList:
    f = open(file)
    
    data = json.load(f)
    
    try:
        climate = data["climate"]
        climate_zone = climate["code"]
    
        coords = data["coords"]
        lat = coords["lat"]
        lon = coords["lon"]
        
        if climate_zone == 51: #"Tropical rainforest"
            plot_data_lat.append(lat)
            plot_data_lon.append(lon)
            plot_data_color.append("#00FF80")
        elif climate_zone == 52: #"Tropical monsoon"
            plot_data_lat.append(lat)
            plot_data_lon.append(lon)
            plot_data_shape.append("o")
            #plot_data_color.append("#139341")
            plot_data_color.append("#00FF80")
        elif climate_zone == 53: # Tropical
            plot_data_lat.append(lat)
            plot_data_lon.append(lon)
            plot_data_color.append("#00FF80")
        elif climate_zone == 101: #"Desert"
            plot_data_lat.append(lat)
            plot_data_lon.append(lon)
            plot_data_color.append("#FF8080")
        elif climate_zone == 102: # Semi-arid
            plot_data_lat.append(lat)
            plot_data_lon.append(lon)
            plot_data_color.append("#FF8080")
        elif climate_zone == 151: #"Humid subtropical"
            plot_data_lat.append(lat)
            plot_data_lon.append(lon)
            plot_data_color.append("#8080A0")
        elif climate_zone == 152: #"Oceanic"
            plot_data_lat.append(lat)
            plot_data_lon.append(lon)
            plot_data_color.append("#8080FF")
        elif climate_zone == 153: #"Mediterranean"
            plot_data_lat.append(lat)
            plot_data_lon.append(lon)
            plot_data_color.append("#8080FF")
        elif climate_zone == 201: #"Humid continental"
            plot_data_lat.append(lat)
            plot_data_lon.append(lon)
            plot_data_color.append("#808080")
        elif climate_zone == 202: #"Subarctic"
            plot_data_lat.append(lat)
            plot_data_lon.append(lon)
            plot_data_color.append("#808080")
        else: #"Subarctic"
            plot_data_lat.append(lat)
            plot_data_lon.append(lon)
            plot_data_color.append("#FFFFFF")
    except BaseException as err:
        print(err)
        
img = plt.imread("Equirectangular-projection.jpg")
plt.title("Points of measurement")
plt.gca().set_xlabel("Lon")
plt.gca().set_ylabel("Lat")
plt.imshow(img, extent=[-180, 180, -90, 90])
plt.scatter(plot_data_lon, plot_data_lat, marker=".", c=plot_data_color)
tropicalPatch = matplotlib.patches.Rectangle((0, 0), 0, 0, color = "#00FF80")
dryPatch = matplotlib.patches.Rectangle((0, 0), 0, 0, color = '#FF8080')
temperatePatch = matplotlib.patches.Rectangle((0, 0), 0, 0, color = '#8080FF')
continentalPatch = matplotlib.patches.Rectangle((0, 0), 0, 0, color = '#808080')
noDataPatch = matplotlib.patches.Rectangle((0, 0), 0, 0, color = '#FFFFFF')

legend = plt.legend([tropicalPatch, dryPatch, temperatePatch, continentalPatch, noDataPatch], ['Tropical', 'Dry', 'Temperate', 'Continental', 'No data'], markerscale = 5, frameon = False, fontsize = 10, facecolor="#00FFFF", bbox_to_anchor =(0.1,0.))
plt.show()
